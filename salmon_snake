#configfile: 'configs/cyanos.json'
#reference_genome = config["reference_genome"]
#wd_dir = config["working_dir"]
#indx_name = config["index_name"]
#project_name = 'synechocystis'
#annotation = config["annotation"]
#ref_path = config["reference_genome_path"]


###################################
## Define your samples in a list ##
###################################
# -> assuming that all of your samples are in one directory
# -> these lines need to be adapted 

import os
sample_path = '/home/sunam188/MA_thesis/synechocystis/main_data/fastq'
samples = [x.split('_')[0] for x in os.listdir(sample_path) if not x.startswith('.')]
samples = list(set(samples))

rule all:
    input:
        expand('main_data/salmon/{sample}_quant', sample=samples)


rule align_salmon:
    input:
        s1 = 'main_data/fastq/{sample}_1.fastq',
        s2 = 'main_data/fastq/{sample}_2.fastq',
    output:
        quant = directory('main_data/salmon/{sample}_quant'),
    threads: 1
    shell:
        'salmon quant -i reference_genome/synechocystis_index -l A --gcBias -1 {input.s1} -2 {input.s2} -p 1 --validateMappings -o {output.quant}'    